import { Api, ApiConfig } from './api';

/**
 * Creates a configured API instance
 */
export const restConfig = (token?: string, config?: Partial<ApiConfig>) => {
    const api = new Api({
        baseURL: config?.baseURL || process.env.VITE_API_URL || 'https://api.example.com',
        timeout: config?.timeout || 10000,
        headers: {
            'Content-Type': 'application/json',
            ...(token && { Authorization: `Bearer ${token}` }),
            ...config?.headers,
        },
    });
    return api.api;
};

/**
 * Default API instance (without authentication)
 */
export const apiV1 = restConfig();

/**
 * Create authenticated API instance
 */
export const createAuthenticatedApi = (token: string, config?: Partial<ApiConfig>) => {
    return restConfig(token, config);
};