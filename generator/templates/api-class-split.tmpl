import axios, { AxiosInstance, AxiosRequestConfig } from 'axios';
import * as Types from './types';
{{range .Methods}}
import { {{.Name}} } from './methods/{{.Name}}';{{end}}

export interface ApiConfig {
  baseURL?: string;
  timeout?: number;
  headers?: Record<string, string>;
}

export class Api {
  private client: AxiosInstance;

  constructor(config?: ApiConfig) {
    this.client = axios.create({
      baseURL: config?.baseURL || 'https://api.example.com',
      timeout: config?.timeout || 10000,
      headers: config?.headers || {},
    });
  }

  public get api() {
    return {
{{range .Methods}}      {{.Name}}: {{.Name}}(this.client),
{{end}}    };
  }
}